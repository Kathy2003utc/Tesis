{% load static %}
<!DOCTYPE html>
<html lang="es">
    
<head>

    <link rel="manifest" href="{% static 'pwa/manifest.json' %}">
    <meta name="theme-color" content="#8A5A3C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <meta charset="UTF-8">
    <title>Café Restaurante Productos Carlos Gerardo · Administración</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <!-- DataTables Buttons -->
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>


    <style>
        /* ================= PALETA ================= */
        :root {
            --cafe-profundo: #8A5A3C;
            --cafe-tostado: #A66E4A;
            --verde: #3E7A3F;
            --blanco-calido: #F8F5F2;
            --crema-suave: #FAF4EC;
            --gris-suave: #E2DED8;
            --texto-oscuro: #2B1A10;
            --rojo-alerta: #C14949;
        }

        /* ================= BASE ================= */
        body {
            margin: 0;
            background: var(--blanco-calido);
            color: var(--texto-oscuro);
            font-family: system-ui, -apple-system, sans-serif;
        }

        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ================= TOPBAR ================= */
        .topbar {
            height: 60px;
            background: var(--crema-suave);
            border-bottom: 1px solid var(--gris-suave);
            display: flex;
            align-items: center;
            justify-content: center; /* título centrado */
            padding: 0 14px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .topbar-title {
            font-weight: 700;
            font-size: 1.15rem;
            color: var(--texto-oscuro);
        }

        /* acciones (perfil / logout) pegadas a la derecha pero sin mover el título */
        .topbar-actions {
            position: absolute;
            right: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* ================= CONTENT ================= */
        .content {
            padding: 20px;
            flex: 1;
        }

        /* ================= FOOTER ================= */
        footer {
            background: var(--crema-suave);
            border-top: 1px solid var(--gris-suave);
            font-size: 13px;
            padding: 10px;
            text-align: center;
        }

        /* ================= FORM ERRORS ================= */
        .error {
            color: var(--rojo-alerta);
            font-weight: 600;
            font-size: .85rem;
        }

        .form-control.error {
            border: 1px solid var(--rojo-alerta);
        }

        /* Evitar scroll horizontal raro */
        .content {
            min-width: 0;
            overflow-x: visible;
        }
        /* ================= FORZAR BOTÓN LOGOUT IGUAL AL CAJERO ================= */
        .btn-logout {
        border: 1px solid var(--rojo-alerta) !important;
        color: var(--rojo-alerta) !important;
        background: transparent !important;
        font-weight: 600;
        border-radius: 0.25rem; /* igual al outline default bootstrap */
        padding: .25rem .5rem;  /* igual al btn-sm */
        line-height: 1.5;
        }

        .btn-logout:hover {
        background: var(--rojo-alerta) !important;
        color: #fff !important;
        }

        .btn-logout:focus,
        .btn-logout:active {
        box-shadow: 0 0 0 .2rem rgba(193, 73, 73, .25) !important;
        }
    </style>
</head>

<body>

    <div class="app">

        <!-- ================= TOPBAR ================= -->
        <div class="topbar">
            <div class="topbar-title">
                Panel Cocina
            </div>

            <div class="topbar-actions">
                <a href="{% url 'perfil_admin' %}" class="text-dark">
                    <i class="bi bi-person-circle fs-4"></i>
                </a>
                <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-danger btn-logout">
                Cerrar Sesión
                </a>

            </div>
        </div>

        <!-- ================= MAIN CONTENT ================= -->
        <main class="content">
            {% block contenido %}{% endblock %}
        </main>

        <!-- ================= FOOTER ================= -->
        <footer>
            <strong>Katherin Pico</strong> · kathy.jim06.cc@gmail.com · 0958615103
        </footer>

    </div>

    <!-- ================= MENSAJES DJANGO + SWEETALERT ================= -->
    {% if messages %}
        {% for message in messages %}
            <div class="django-message" data-type="{{ message.tags }}" data-text="{{ message|escapejs }}"></div>
        {% endfor %}
    {% endif %}

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".django-message").forEach(msg => {
                const type = msg.dataset.type;
                const text = msg.dataset.text;

                let config = {
                    success: {
                        icon: "success",
                        title: "Éxito",
                        color: "#4F8A57"
                    },
                    error: {
                        icon: "error",
                        title: "Error",
                        color: "#C14949"
                    },
                    warning: {
                        icon: "warning",
                        title: "Advertencia",
                        color: "#D9A441"
                    }
                };

                const cfg = config[type] || config.success;

                Swal.fire({
                    icon: cfg.icon,
                    title: cfg.title,
                    text: text,
                    confirmButtonText: "Aceptar",
                    confirmButtonColor: cfg.color,
                    iconColor: cfg.color,
                    background: "#FFF7F0"
                });

                msg.remove();
            });
        });
    </script>

    <script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
        navigator.serviceWorker.register("/sw.js", { scope: "/" });
        });
    }
    </script>


</body>

</html>
