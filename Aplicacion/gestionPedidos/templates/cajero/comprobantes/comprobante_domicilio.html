<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Comprobante Domicilio</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 15px;
            color: #000;
        }

        h2 {
            text-align: center;
            font-size: 18px;
            margin-bottom: 3px;
        }

        .datos-local {
            text-align: center;
            font-size: 12px;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .subtitulo {
            text-align: center;
            font-weight: bold;
            margin: 8px 0;
            text-transform: uppercase;
        }

        .info {
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        hr {
            border: none;
            border-top: 1px dashed #999;
            margin: 10px 0;
        }

        table {
            width: 100%;
            font-size: 13px;
            border-collapse: collapse;
        }

        th {
            font-weight: bold;
            border-bottom: 1px solid #000;
            padding-bottom: 4px;
            text-align: center;
        }

        td {
            padding: 4px 0;
        }

        .right { text-align: right; }
        .center { text-align: center; }

        .total {
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .detalle-pago {
            font-size: 14px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .footer {
            font-size: 11px;
            text-align: center;
            margin-top: 12px;
            line-height: 1.4;
        }

        @page {
            size: 148mm 210mm; /* A5 vertical (factura pequeña) */
            margin: 8mm;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            color: #000;
        }

        .ticket {
            width: 100%;
            max-width: none;
            margin: 0 auto;
            padding: 10;
        }
        </style>
</head>

<body>

<div class="ticket">

    <h2>Café Restaurante "Productos Carlos Gerardo"</h2>

    <!-- DATOS DEL LOCAL -->
    <div class="datos-local">
        Telf: 0992964222 <br>
        Dirección: Barrio Eloy Alfaro
    </div>

    <p class="subtitulo">NOTA DE VENTA</p>

    <div class="info">
        <b>N°:</b> {{ comprobante.numero_comprobante }} <br>
        <b>Fecha:</b> {{ comprobante.fecha_hora|date:"d/m/Y H:i" }} <br>
        <b>Cliente:</b>
        {% if requiere_datos %}
            {{ nombre_impreso|default:"(SIN NOMBRE)" }} <br>
            <b>Dirección:</b> {{ direccion_impresa|default:"(SIN DIRECCIÓN)" }} <br>
        {% else %}
            Consumidor final <br>
        {% endif %}

    </div>

    <hr>

    <table>
        <thead>
            <tr>
                <th>Descripción</th>
                <th>Cant.</th>
                <th>Sub.</th>
                <th>Recargo U.</th>
                <th>P.Total</th>
            </tr>
        </thead>

        <tbody>
        {% for d in detalles %}
            <tr>
                <td>{{ d.producto.nombre }}</td>
                <td class="center">{{ d.cantidad }}</td>
                <td class="right">$ {{ d.precio_unitario|floatformat:2 }}</td>
                <td class="right">$ {{ d.recargo|floatformat:2 }}</td>
                <td class="right">$ {{ d.total_con_recargo|floatformat:2 }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <hr>

    <p class="total">
        TOTAL GENERAL: $ {{ pedido.total|floatformat:2 }}
    </p>

    <div class="detalle-pago">
        <b>Método de pago:</b> {{ pago.metodo_pago }} <br>
        <b>Recibido:</b> $ {{ pago.monto_recibido|floatformat:2 }} <br>
        <b>Cambio:</b> $ {{ pago.cambio|floatformat:2 }} <br>
    </div>

    <hr>

    <div class="footer">
        <em>Documento NO VÁLIDO para efectos tributarios.</em>
    </div>

</div>

<script>
    window.onload = function() {
        setTimeout(() => window.print(), 300);
    };
</script>

</body>
</html>